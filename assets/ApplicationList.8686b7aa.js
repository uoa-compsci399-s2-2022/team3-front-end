import{d as Y,X as P,g as d,Y as k,i as U,z as V,f as W,p as B,k as q,n as G,o as _,e as A,w as l,u as R,Z as O,r as X,a as i,$ as Z,b as e,c as $,x as j,F as S,q as N,G as m,a0 as x,a1 as J,a2 as T,a3 as K,a4 as Q,a5 as ee,a6 as te,v as le,s as I,a7 as ae,t as se,a8 as M,y as oe,a9 as ne,_ as ie}from"./index.594ced5a.js";/* empty css                   *//* empty css                   *//* empty css               *//* empty css                    *//* empty css               *//* empty css               *//* empty css                 *//* empty css                  */const re=["id"],ue=i("br",null,null,-1),ce=m(" Please select a term: "),pe=i("br",null,null,-1),de=i("br",null,null,-1),_e=i("br",null,null,-1),me=i("br",null,null,-1),fe=m(" Please select your application type: "),ve=i("br",null,null,-1),be=i("br",null,null,-1),he=i("br",null,null,-1),ye=m("Start"),ge=Y({__name:"StartApplicationDrawer",props:{visible:null},setup(E){const C=P(),r=d(),h=k([]),u=d(),z=d([{value:"tutor",label:"Tutor"},{value:"marker",label:"Marker"}]);U(()=>{V("api/availableTerm").then(p=>{p.forEach(s=>{h.push({label:s.termName,value:s.termID})})}),f()});const c=()=>{let p=-1;if(r.value===void 0||r.value===null){x.error("Please select a term.");return}if(u.value===void 0||u.value===null){x.error("Please select your application type.");return}V(`api/newApplication/${r.value}/${u.value}`).then(s=>{p=s.application_id}).then(s=>{C.push("/application/"+p)}).catch(s=>{x({message:s.response.data.message,type:"error"})})},y=d(),g=d();setInterval(()=>{f()},2e3);const D=()=>window.innerWidth,f=()=>{y.value=D()>768?"30%":"80%",g.value=D()>768?"rtl":"btt"};return(p,s)=>{const o=X("DocumentAdd"),a=W,n=B,v=q,w=G;return _(),A(R(O),{modelValue:E.visible.visible,"onUpdate:modelValue":s[2]||(s[2]=t=>E.visible.visible=t),"show-close":!1,size:y.value,direction:g.value},{header:l(({titleId:t,titleClass:L})=>[i("h4",{id:t,class:Z(L),style:{"font-size":"x-large"}},"Start an Application",10,re)]),default:l(()=>[e(n,{justify:"center"},{default:l(()=>[e(a,{size:40},{default:l(()=>[e(o)]),_:1})]),_:1}),ue,ce,pe,de,e(n,{justify:"center"},{default:l(()=>[e(w,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),class:"m-2",placeholder:"Terms",size:"large"},{default:l(()=>[(_(!0),$(S,null,j(h,t=>(_(),A(v,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),_e,me,fe,ve,be,e(n,{justify:"center"},{default:l(()=>[e(w,{modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=t=>u.value=t),class:"m-2",placeholder:"Terms",size:"large"},{default:l(()=>[(_(!0),$(S,null,j(z.value,t=>(_(),A(v,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),he,e(n,{justify:"center"},{default:l(()=>[e(R(N),{onClick:c,type:"danger",size:"large"},{default:l(()=>[ye]),_:1})]),_:1})]),_:1},8,["modelValue","size","direction"])}}}),De={class:"list-container"},we=m("+ Application"),Te=m("Reset all filters"),ke=m("Delete "),Ae=Y({__name:"ApplicationList",setup(E){const C=P();J();const r=d(!1),h=k({visible:!1}),u=()=>{h.visible=!0},z={Accepted:"success",Pending:"info",Rejected:"danger",Unsubmit:"warning"},c=k([]),y=k([]),g=d(),D=()=>{g.value.clearFilter()},f=(o,a,n)=>{const v=n.property;return a[v]===o},p=o=>{o.status==="Unsubmit"&&C.push("/application/"+o.applicationID)},s=(o,a)=>{ne(`api/application/${a.applicationID}`).then(()=>{c.splice(o,1)}).catch(n=>{x({message:n.response.data.message,type:"error"})})};return U(()=>{V("api/currentStudentApplicationList").then(o=>{r.value=!0,c.splice(0,c.length),o.forEach(a=>{T(a.createdDateTime).isValid()&&(a.createdDateTime=T(a.createdDateTime).format("DD-MM-YYYY HH:mm:ss")),T(a.submittedDateTime).isValid()&&(a.submittedDateTime=T(a.submittedDateTime).format("DD-MM-YYYY HH:mm:ss"))}),c.push(...o),r.value=!1}),V("api/availableTerm").then(o=>{o.forEach(a=>{y.push({text:a.termName,value:a.termName})})})}),(o,a)=>{const n=N,v=K,w=B,t=Q,L=ee,H=te,F=le;return _(),$(S,null,[i("div",De,[e(w,{justify:"end"},{default:l(()=>[e(v,{span:8,md:4,lg:3},{default:l(()=>[e(n,{onClick:u,type:"primary",size:"large"},{default:l(()=>[we]),_:1})]),_:1})]),_:1}),e(n,{onClick:D},{default:l(()=>[Te]),_:1}),I((_(),A(R(ae),{ref_key:"tableRef",ref:g,"row-key":"date",data:c,style:{width:"99%"},onRowClick:p},{default:l(()=>[e(t,{prop:"applicationID",label:"ApplicationID",sortable:"","column-key":"date"}),e(t,{prop:"term",label:"Term",filters:y,"filter-method":f},null,8,["filters"]),e(t,{prop:"createdDateTime",label:"Created DateTime",sortable:""}),e(t,{prop:"submittedDateTime",label:"Submitted DateTime","min-width":90,sortable:""}),e(t,{prop:"type",label:"Type",filters:[{text:"Marker",value:"marker"},{text:"Tutor",value:"tutor"}],"filter-method":f,"filter-placement":"bottom-end"}),e(t,{prop:"status",label:"Status",filters:[{text:"Accepted",value:"Accepted"},{text:"Pending",value:"Pending"},{text:"Rejected",value:"Rejected"},{text:"Unsubmit",value:"Unsubmit"}],"filter-method":f,"filter-placement":"bottom-end"},{default:l(b=>[e(L,{type:z[b.row.status],"disable-transitions":""},{default:l(()=>[m(se(b.row.status),1)]),_:2},1032,["type"])]),_:1}),e(t,{align:"right"},{default:l(b=>[I(i("div",null,[e(H,{title:"Are you sure to delete?",onConfirm:M(xe=>s(b.$index,b.row),["stop"]),width:"30"},{reference:l(()=>[e(n,{size:"small",type:"danger",onClick:a[0]||(a[0]=M(()=>{},["stop"]))},{default:l(()=>[ke]),_:1})]),_:2},1032,["onConfirm"])],512),[[oe,b.row.status==="Unsubmit"]])]),_:1})]),_:1},8,["data"])),[[F,r.value]])]),e(ge,{visible:h},null,8,["visible"])],64)}}});const Ie=ie(Ae,[["__scopeId","data-v-477e4c30"]]);export{Ie as default};
